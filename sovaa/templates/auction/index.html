<!DOCTYPE html>
<html>
<head>
    <title>Auction</title>
</head>
<body>
    <h1>Auction</h1>
    <div id="user-section">
        {% if g.user %}
            <p>Welcome, {{ g.user['username'] }}!</p>
            <p><a href="{{ url_for('auth.logout') }}">Logout</a></p>
            <hr>
            {% if g.user %}
                <p><a href="{{ url_for('auction.create') }}">Create Announcement</a></p>
            {% endif %}
        {% else %}
            <p><a href="{{ url_for('auth.register') }}">Register</a></p>
            <p><a href="{{ url_for('auth.login') }}">Login</a></p>
        {% endif %}
    </div>
    <hr>
    <div id="announcements-section">
        {% for announcement in announcements %}
            <div>
                <h3>{{ announcement['title'] }}</h3>
                <p>Author: {{ announcement['username'] }}</p>
                <p>Price: ${{ announcement['price'] }}</p>
                <p>{{ announcement['body'] }}</p>
                {% if announcement['image_path'] %}
                    <img src="{{ announcement['image_path'] }}" alt="Announcement Image">
                {% endif %}
                {% if g.user and g.user['id'] == announcement['author_id'] %}
                     <p>
                        <a href="{{ url_for('auction.update', id=announcement['id']) }}">Edit</a>
                        <form method="post" action="{{ url_for('auction.delete', id=announcement['id']) }}" style="display:inline-block;">
                            <input type="submit" value="Delete">
                        </form>
                    </p>
                {% endif %}
                <hr>
            </div>
        {% endfor %}
    </div>
</body>
</html>