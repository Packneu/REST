<!DOCTYPE html>
<html>
<head>
    <title>Payment</title>
    <script src="https://www.paypal.com/sdk/js?client-id=AZrtKHauKdGTjaOXM3jyIVdf9c9Z6pl1Fchr743J0Mgb1m9az1jJ0iG7YBAOY6_6iQUkMcPBc1eR-uNe"></script>
    <script>
        function initPayPalButton() {
            paypal.Buttons({
                createOrder: function(data, actions) {
                    return actions.order.create({
                        purchase_units: [
                            {
                                amount: {
                                    currency_code: 'USD',
                                    value: '{{ price }}'
                                }
                            }
                        ]
                    });
                },
                onApprove: function(data, actions) {
                    return actions.order.capture().then(function(details) {
                        // Отправка данных на сервер
                        var xhr = new XMLHttpRequest();
                        xhr.open('POST', '/api/paypal');
                        xhr.setRequestHeader('Content-Type', 'application/json');
                        xhr.onload = function() {
                            if (xhr.status === 200) {
                                alert('Payment completed successfully!');
                                window.location.href = '/';
                            } else {
                                alert('Error occurred during payment. Please try again.');
                            }
                        };
                        var data = JSON.stringify({
                            username: '{{ username }}',
                            price: '{{ price }}',
                            id: '{{ id }}'
                        });
                        xhr.send(data);
                    });
                },
                onError: function(err) {
                    // Обработка ошибок при проведении платежа
                    console.error(err);
                    alert('Error occurred during payment. Please try again.');
                }
            }).render('#paypal-button-container');
        }
        initPayPalButton();
    </script>
</head>
<body>
    <div class="put-up-lot-variant2">
        <div class="header">
            <div class="logo">
                <img
                  alt=""
                  class="img"
                  src="https://static.overlay-tech.com/assets/dc3b0d8c-ab90-4d46-bafb-9ed369b84a60.png"
                />
                <div class="txt">
                  <p class="watch-auct">
                    WATCH<br />
                    auct
                  </p>
                  <div class="ellipse-1"></div>
                </div>
              </div>
              <p class="hi-marlin">Hi, {{ username }}</p>
    </div>
    <p class="payment">Payment</p>
  <div class="frame-225">
    <p class="user-someus">User: {{ username }}</p>
    <p class="lot-id-548763840">Lot ID: {{ id }}</p>
    <p class="price">{{price}}</p>
  </div>
<div id="paypal-button-container" style=" margin-bottom: 41.64px; margin-left: 784px;  padding: 11px 98px;  display: flex; flex-direction: column;  align-items: center;"></div>

</div>
    
</body>
<style>
html, body {
    margin: 0;
    padding: 0;
  }
  .payment-two {
    background-color: rgba(255, 255, 255, 1);
    padding: 0 0 298.64px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
  .header {
    margin-bottom: 156px;
  }
  .payment {
    font-family: "Nunito Sans";
    font-size: 28px;
    font-weight: 900;
    line-height: normal;
    color: rgba(53, 53, 49, 1);
    margin-bottom: 25px;
    margin-left: 352px;
  }
  .frame-225 {
    margin-bottom: 64px;
    margin-left: 352px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
  .user-someus {
    max-width: 111px;
    font-family: "Hind";
    font-size: 19px;
    font-weight: 500;
    line-height: normal;
    color: rgba(53, 53, 49, 1);
    margin-bottom: 8px;
  }
  .lot-id-548763840 {
    max-width: 150px;
    font-family: "Hind";
    font-size: 19px;
    font-weight: 500;
    line-height: normal;
    color: rgba(53, 53, 49, 1);
  }
  .pay-pal-1-1 {
    background-color: rgba(255, 149, 5, 1); margin-bottom: 41.64px; margin-left: 784px;  padding: 11px 98px;  display: flex; flex-direction: column;  align-items: center;
    margin-bottom: 41.64px;
    margin-left: 784px;
    padding: 11px 98px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .group {
    width: 156px;
    height: 41.36px;
  }
  .pay-pal-1-2 {
    width: 306px;
    height: 41.36px;
    background-color: rgba(236, 78, 32, 1);
    margin-bottom: 41.64px;
    margin-left: 784px;
    padding: 11px 23px;
  }
  .pay-pal-1-3 {
    width: 306px;
    height: 41.36px;
    background-color: rgba(1, 111, 185, 1);
    margin-left: 784px;
    padding: 11px 23px;
  }
  .put-button {
    text-decoration: none;
    display: inline-block;
    padding: 15px 30px;
    margin: 10px 20px;
    border-radius: 10px;
    box-shadow: 0 0 40px 40px #ec631f inset, 0 0 0 0 #F137A6;
    font-family: 'Montserrat', sans-serif;
    font-weight: bold;
    letter-spacing: 2px;
    color: white;
    transition: .15s ease-in-out;
  }
  .put-button:hover {
    box-shadow: 0 0 10px 0 #e45d15 inset, 0 0 10px 4px #ee6a12;
    color: #e25d0a;
  }
  .but {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .line {
    background-color: rgba(255, 255, 255, 1);
    border-radius: 4px;
    padding: 7.33px 0.5px 7.34px;
    display: flex;
    align-items: flex-start;
    align-self: stretch;
    width: 100%;
  }
  .linedesk {
    background-color: rgba(255, 255, 255, 1);
    border-radius: 4px;
    padding: 7.33px 0.5px 74.34px;
    display: flex;
    align-items: flex-start;
    align-self: stretch;
    width: 100%;
  }
  .txt {
    font-family: "Nunito Sans";
    font-size: 21px;
    font-weight: 900;
    line-height: normal;
    color: rgba(197, 209, 217, 1);
  }
  .img-box-fill {
    padding: 11.67px 8.09px 8.08px 8.08px;
    position: relative;
  }
  .rectangle-1 {
    width: 66.84%;
    height: 66.84%;
    border-radius: 16px;
    position: absolute;
    left: 8.08px;
    top: 8.08px;
    border: 8px solid rgba(53, 53, 49, 1);
  }
  .subtract {
    width: 80.83px;
    height: 77.25px;
    position: relative;
  }
  .ellipse-46 {
    width: 16.67%;
    height: 16.67%;
    background-color: rgba(53, 53, 49, 1);
    border-radius: 50%;
    position: absolute;
    left: 52.54px;
    top: 28.29px;
  }
  .header {
      background-color: rgba(53, 53, 49, 1);
      padding: 44px 72px 45px;
      display: flex;
      align-items: center;
      margin-bottom: 87px;
      width: 100%;
      margin: 0 auto;
  }
  .logo {
      margin-left: 10%;
      margin-right: 970px;
      display: flex;
      align-items: center;
  }
  .img {
    width: 48px;
    height: 66px;
    margin-right: 18px;
  }
  .txt {
    position: relative;
  }
  .watch-auct {
    max-width: 95px;
    font-family: "Nunito Sans";
    font-size: 25px;
    font-weight: 800;
    line-height: 29px;
    color: rgba(255, 255, 255, 1);
    position: relative;
  }
  .ellipse-1 {
    width: 8px;
    height: 8px;
    background-color: rgba(236, 78, 32, 1);
    border-radius: 50%;
    position: absolute;
    left: 57px;
    bottom: 27px;
  }
  .hi-marlin {
    max-width: 85px;
    font-family: "Hind";
    font-size: 19px;
    font-weight: 700;
    line-height: normal;
    color: rgba(255, 255, 255, 1);
  }
  .put-up-lot-variant2 {
    background-color: rgba(255, 255, 255, 1);
    padding: 0 0 287.33px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
  .put-your-lot {
    font-family: "Nunito Sans";
    font-size: 28px;
    font-weight: 900;
    line-height: normal;
    color: rgba(53, 53, 49, 1);
    margin-bottom: 87px;
    margin-left: 352px;
  }
  .frame-223 {
    margin-left: 352px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
  .frame-215 {
    margin-bottom: 76px;
    border-radius: 4px;
    padding: 37px 57px 31px;
    display: flex;
    flex-direction: column;
    align-items: center;
    border: 1px solid rgba(53, 53, 49, 1);
  }
  .img-box-fill {
    margin-bottom: 24px;
  }
  .upload-images {
    max-width: 89px;
    font-family: "Hind";
    font-size: 14px;
    font-weight: 500;
    line-height: normal;
    color: rgba(1, 111, 185, 1);
  }
  .frame-216 {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    align-self: stretch;
  }
  .num-1 {
    margin-bottom: 80px;
    display: flex;
    align-items: flex-start;
    height: 98px;
    width: 927px;
  }
  .name {
    margin-right: 80px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    flex: 1;
  }
  .lot-name {
    max-width: 81px;
    font-family: "Hind";
    font-size: 19px;
    font-weight: 700;
    line-height: normal;
    color: rgba(53, 53, 49, 1);
    margin-bottom: 0px;
  }
  
  .some {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    flex: 1;
    height: 98px;
  }
  .price {
    max-width: 100px;
    font-family: "Hind";
    font-size: 19px;
    font-weight: 700;
    line-height: normal;
    color: rgba(53, 53, 49, 1);
    margin-bottom: 0px;
  }
  .some-two {
    margin-bottom: 80px;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    align-self: stretch;
  }
  .description {
    max-width: 100px;
    font-family: "Hind";
    font-size: 19px;
    font-weight: 700;
    line-height: normal;
    color: rgba(53, 53, 49, 1);
    margin-bottom: 0px;
  }
  .but {
    height: 28.34px;
    width: 98px;
  }
  </style>
  </html>
  
</html>
